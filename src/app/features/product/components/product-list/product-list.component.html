<div class="product-list-container">
  <ng-container *ngIf="!selectedProduct">
    <div class="product-list-header">
      <h2>Product List ({{ totalProducts }})</h2>
      <div class="filter-by">
        <app-product-filter
          [categories]="categories"
          [selectedCategory]="selectedCategory"
          (categoryChange)="onCategoryChange($event)"
        ></app-product-filter>
      </div>
    </div>
    <div class="product-grid" appScrollNearEnd (nearEnd)="loadMoreProducts()">
      <app-product-thumbnail
        *ngFor="let product of products; trackBy: trackByProductId"
        [product]="product"
        (cardClick)="showOverlay(product)"
      ></app-product-thumbnail>
    </div>
  </ng-container>
  <app-product-card
    *ngIf="selectedProduct"
    [product]="selectedProduct"
    (closeOverlay)="hideOverlay()"
  ></app-product-card>
</div>
